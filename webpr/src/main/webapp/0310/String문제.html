<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/mystyle.css">
<script>
proc1 = () => {
	//입력
	input = prompt('주민등록번호를 입력하세요');
	
	//각 자리별로 추출하기 - 문자값
	yy = input.substr(0,2);
	mm = input.substr(2,2);
	dd = input.substr(4,2);
	
	ygend = input.substr(7,1);
	
	//비교 - ygend - 성별 구하기 
	if(ygend == "1"   && ygend =="3")
		gender = "남자";
	else (ygend == "2" && ygend =="4" )
		gender = "여자";
	//ygend - 1900 또는 2000  "19"  "20"  1900 2000

	if(ygend == "1"   && ygend =="2")
		byy = "19";  //byy = 1900;
			
	else (ygend == "3" && ygend =="4" )
		byy = "20";  //byy = 2000;
		
	//생년월일
	bir = (byy + yy) + "년 " + mm + "월" + dd + "일"; 
 	//bir = byy + parseInt(yy) + "년 " + mm + "월" + dd + "일";    1900, 2000(숫자)으로 값 줬을때
	
 	//나이
 	today = new Date();
 	year = today.getFullYear();
	age = year - (byy + yy) ;
	
	//출력
	str = input.slice(0,8) + "******<br>"
	str += "생년월일 : " + bir + "<br>";
	str += "나이 : " + age + "<br>";
	str += "성별 : " + gender + "<br>" ;

	
	document.getElementById('result1').innerHTML = str;
		
}


proc2 = () => {
	
	multi = "234567892345";
	sum = 0;
	
	//입력 ABCDEF-GHIJKLM (110325-1234567)
	input = prompt("번호입력");
	
	code = input.replace("-", ""); //1103251234567
	
	
	
	//1. A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.
	for(i=0; i<multi.lengthl; i++) {
		sum += multi.substr(i,1) * code.substr(i,1);
				
	}
	//2. 1번의 합을 11로 나눈 나머지를 구한다.
	na = sum % 11;
	//3. 11에서 2번의 결과를 뺀다.
	res = 11 - na;
	//4. 3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환
	//if(res == 10) res = 0;
	//if(res == 11) res = 1;
	
	res = res % 10;
	
	 
	//5. 4번의 결과와 M자리의 값이 같으면 맞는 번호이다
	if(code.substr(code.length-1,1) ==res){
		flag = "올바른 번호"
	}else {
		flag = "틀린번호"
	};
	
	//출력
	str = "주민번호 : " + input.substring(0, 8) + "******<br>";
	str += flag + "<br>";
	
	document.getElementById('result2').innerHTML = str;
	
}
</script>
</head>

<body>


	<div class="box">
		<p>prompt로 주민등록번호를 입력 받아 생년월일과 성별, 나이를 출력</p>
	
		<input type="button" value="확인" onclick="proc1()"> <br>
		<br>

		<div class="result" id="result1"></div>
	
	</div>
	
	<div class="box">
		<p>주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는<br>
		프로그램을 작성하시오.(ABCDEF-GHIJKLM)</p>
	
		<input type="button" value="확인" onclick="proc2()"> <br>
		<br>

		<div class="result" id="result2"></div>
	
	</div>
</body>
</html>